import type { Case } from "../types";

const voiceFromTheFog: Case = {
  id: "case-006",
  title: "Голос из тумана",
  difficulty: 4,
  description:
    "Необходимо изучить записи о тайных переговорах и связать их с финансовыми операциями, чтобы выявить возможных предателей.",
  xpReward: 500,
  completed: false,
  isNew: false,
  category: "advanced",
  brief: `Среди суматохи и ночных перипетий появляется пленённый гонец, который сумел донести до вас шёпот о тайных переговорах. Он утверждает, что видел, как один из ваших соратников тайно встречался с незнакомцами, передавая секретные документы. В этой связи таблица secret_negotiations становится ключевым источником информации – здесь зафиксированы все контакты, совершённые в тишине ночи, когда доверие могло быть подорвано.

Вы решаете объединить сведения из secret_negotiations с финансовыми операциями, чтобы найти связь между крупными выплатами и секретными переговорами.`,
  objectives: [
    "Найти записи о тайных переговорах",
    "Связать их с финансовыми операциями",
    "Выявить возможных предателей",
  ],
  solution: {
    answer: `SELECT sn.person_name, sn.date, f.amount, sn.details
FROM secret_negotiations sn
JOIN finances f
  ON sn.person_name = f.recipient_name
WHERE f.amount > 50
  AND sn.date = f.transaction_date
  AND sn.contact_type IS NOT NULL
  AND sn.contact_type <> 'none'`,
    successMessage:
      "Отлично! Вы обнаружили важные связи между тайными переговорами и финансовыми операциями.",
    explanation: `Вы успешно выполнили сложный запрос, объединяющий данные из таблиц secret_negotiations и finances. 
Этот запрос помог вам:
• Найти всех, кто получал крупные выплаты
• Установить связь с тайными переговорами
• Выявить подозрительные совпадения во времени
• Обнаружить возможных участников заговора`,
  },
};

export default voiceFromTheFog;
